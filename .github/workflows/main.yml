
name: Windows Self-Hosted Runner Test

on:
  workflow_dispatch: # Manual trigger for testing
  push:
    branches: [main] # push on main branch

jobs:
  build:
    runs-on: [self-hosted, Windows, X64] # Match your runner labels exactly

    steps:
      # Step 1: Confirm runner
      - name: Verify Runner
        run: echo "âœ… Running on self-hosted Windows runner"

      # Step 2: Checkout code
      - name: Checkout Code
        uses: actions/checkout@v4

      # Step 3: Set up PowerShell environment
      - name: PowerShell Version
        run: $PSVersionTable.PSVersion

      # Step 4: Run a simple lint or script
      - name: Run Lint Script
        shell: pwsh
        run: |
          Write-Host "Running lint checks..."
          # Example: Check for .ps1 files
          Get-ChildItem -Recurse -Filter *.ps1 | ForEach-Object {
            Write-Host "Found script: $($_.FullName)"
          }

      # Step 5: Optional - Upload artifact
      - name: Upload Log
        uses: actions/upload-artifact@v4
        with:
          name: lint-log
