
name: Lint Code Base

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  lint:
    name: Run Super-Linter
    runs-on: self-hosted

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Set Execution Policy
        run: |
          Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass -Force
        shell: powershell

      - name: Verify Docker
        run: docker --version
        shell: powershell

      - name: Lint Code Base
        run: |
          docker run `
            -e VALIDATE_ALL_CODEBASE=true `
            -e DEFAULT_BRANCH=main `
            -e GITHUB_TOKEN=${{ secrets.GITHUB_TOKEN }} `
            -v "${{ github.workspace }}:/tmp/lint" `
            github/super-linter:slim-v5
        shell: powershell
